/*! For license information please see 9.260a4493.chunk.js.LICENSE.txt */
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[9],{115:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(7),s=a(3),r=a(4),c=a(11),l=a(10),i=a(37),o=a(12),u=a(0),d=a.n(u),m=a(36),p=a.n(m),h=(a(123),a(127),a(128),a(129),a(130),a(131),a(132),a(133),a(134),a(135),a(136),a(122),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).tableEl=d.a.createRef(),a.state={},a.table=null,a.draw=function(){a.table.draw()},a.highlightRow=function(e,t){var n=$(e);n.tooltip("dispose");var s="";if(t.__meta_pending){s="Pending - ";var r="table-dark";if(t.__meta_error&&t.__meta_error.message){r="Network Error"!==t.__meta_error.message?"table-warning":r;var c=t.__meta_error;if(s+=c.message,c.errors)for(var l=0,i=Object.keys(c.errors);l<i.length;l++){var o=i[l];s+="\n"+c.errors[o]}}e.classList.add(r)}else t[a.props.softDeleteField]?(s="Discontinued",e.classList.add("table-danger")):(e.classList.remove("table-warning"),e.classList.remove("table-dark"),e.classList.remove("table-danger"));s&&n.tooltip({toggle:"tooltip",placement:"bottom",title:s})};var n=Object(i.a)(a);return a.defaultConfig={pagingType:"full_numbers",lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],dom:'rt<"bottom"lpi><"clear">',buttons:[{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o text-info"></i>',titleAttr:"Excel",exportOptions:{columns:"thead th:not(.noExport)"}}],responsive:!0,language:{search:"_INPUT_",searchPlaceholder:"Search records"},rowCallback:function(e,t){var a=$(e);a.tooltip("dispose");var s="";if(t.__meta_pending){s="Pending - ";var r="table-dark";if(t.__meta_error&&t.__meta_error.message){r="Network Error"!==t.__meta_error.message?"table-warning":r;var c=t.__meta_error;if(s+=c.message,c.errors)for(var l=0,i=Object.keys(c.errors);l<i.length;l++){var o=i[l];s+="\n"+c.errors[o]}}e.classList.add(r)}else t[n.props.softDeleteField]?(s="Discontinued",e.classList.add("table-danger")):(e.classList.remove("table-warning"),e.classList.remove("table-dark"),e.classList.remove("table-danger"));s&&a.tooltip({toggle:"tooltip",placement:"bottom",title:s})}},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.initTable()}},{key:"componentWillUnmount",value:function(){$(this.tableEl.current).find("tr[title]").tooltip("dispose")}},{key:"initTable",value:function(){var e=this,t=this.props.config||{},a=this.props.config.rowCallback;t.rowCallback=function(t,n){e.highlightRow(t,n),a&&a(t,n)},this.table=$(this.tableEl.current).DataTable(Object(n.a)({},this.defaultConfig,{},t))}},{key:"componentDidUpdate",value:function(e,t){p.a.isEqual(e.config,this.props.config)||(this.table.destroy(),this.initTable())}},{key:"render",value:function(){return d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("div",{className:"card data-tables"},d.a.createElement("div",{className:"card-header text-center"},d.a.createElement("h3",null,this.props.title)),d.a.createElement("div",{className:"card-body table-striped table-no-bordered table-hover dataTable dtr-inline table-full-width"},d.a.createElement("div",{className:"toolbar col-12"},d.a.createElement("div",{className:"row"},this.props.toolbar)),d.a.createElement("div",{className:"fresh-datatables"},d.a.createElement("table",{ref:this.tableEl,className:"table table-striped table-no-bordered table-hover",cellSpacing:"0",width:"100%",style:{width:"100%"}},d.a.createElement("thead",null,d.a.createElement("tr",null,this.props.children)),d.a.createElement("tfoot",null,d.a.createElement("tr",null,this.props.children))))))))}}]),t}(u.Component))},116:function(e,t,a){"use strict";function n(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var s=a[n];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}a.d(t,"a",(function(){return n}))},118:function(e,t,a){"use strict";var n=a(124),s=a.n(n);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.a.fire({title:"Are you sure?",text:t.consequence||"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:t.yes||"Yes"}).then((function(a){if(a.value){var n=s.a.fire({title:t.loading||"Waiting...",text:t.loading_text||"waiting for operation to complete",showConfirmButton:!1,onBeforeOpen:function(){s.a.showLoading()}});e().then((function(e){n.closeModal(),s.a.fire(e.success,e.succes_text,"success")}),(function(e){n.closeModal(),s.a.fire({icon:"error",title:"Oops...",text:e.error,footer:e.footer||""})}))}else a.dismiss===s.a.DismissReason.cancel&&s.a.fire("Cancelled",t.canceled,"error")}))}},120:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(7),s=a(3),r=a(4),c=a(11),l=a(10),i=a(12),o=a(0),u=a.n(o),d=(a(140),a(141),a(28)),m=a.n(d),p=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={date:""},a.dateInput=u.a.createRef(),a.hiddenInput=u.a.createRef(),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;m()(this.dateInput.current).datepicker({format:"dd/mm/yyyy",zIndexOffset:1040}).on("changeDate changeMonth changeYear",(function(t){return e.handleChange(t)})),this.dateInput.current.value=this.props.value?this.props.value.split("-").reverse().join("/"):""}},{key:"componentDidUpdate",value:function(e,t){if(e.value!==this.props.value){var a=this.props.value?this.props.value.split("-").reverse().join("/"):"";this.dateInput.current.value=a,new Date(this.props.value).getDate()&&m()(this.dateInput.current).datepicker("setDate",a)}}},{key:"handleChange",value:function(e){var t=e.target.value.split("/").reverse().join("-");Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(this.hiddenInput.current,t);var a=new Event("input",{bubbles:!0});this.hiddenInput.current.dispatchEvent(a)}},{key:"render",value:function(){var e=Object(n.a)({},this.props);return delete e.value,u.a.createElement(u.a.Fragment,null,u.a.createElement("input",Object.assign({onChange:this.handleChange.bind(this)},e,{type:"text",ref:this.dateInput})),u.a.createElement("input",{onChange:this.props.onChange,name:this.props.name,style:{display:"none"},ref:this.hiddenInput,value:this.state.date}))}}]),t}(o.Component)},122:function(e,t){jQuery.fn.dataTable.Api.register("MakeCellsEditable()",(function(e){var t=this.table();jQuery.fn.extend({updateEditableCell:function(t){var a=$(t).closest("table").DataTable().table(),n=a.row($(t).parents("tr")),s=a.cell($(t).parents("td, th")),r=s.index().column,c=function(e){var t;switch($(e).prop("nodeName").toLowerCase()){case"a":$(e).siblings("input").length>0&&(t=$(e).siblings("input")),$(e).siblings("select").length>0&&(t=$(e).siblings("select")),$(e).siblings("textarea").length>0&&(t=$(e).siblings("textarea"));break;default:t=$(e)}return t}(t),l=c.val();function i(){e.allowNulls.errorClass?$(c).addClass(e.allowNulls.errorClass):$(c).css({border:"red solid 1px"})}function o(t){var a=s.data();s.data(t),e.onUpdate(s,n,a)}!l&&e.allowNulls&&1!=e.allowNulls?e.allowNulls.columns?e.allowNulls.columns.indexOf(r)>-1?o(l):i():l||i():l&&e.onValidate?e.onValidate(s,n,l)?o(l):i():o(l);a.page.info().page},cancelEditableCell:function(e){var t=$(e.closest("table")).DataTable().table(),a=t.cell($(e).parents("td, th"));a.data(a.data()),t.draw()}}),"destroy"===e&&($(t.body()).off("click","td"),t=null),null!=t&&$(t.body()).on("click","td",(function(){var a=t.cell(this).index().column;if(e.columns&&e.columns.indexOf(a)>-1||!e.columns){var n=t.row($(this).parents("tr"));editableCellsRow=n;var s=t.cell(this).node(),r=t.cell(this).data();if(r=function(e){if("undefined"===typeof e||null===e||e.length<1)return"";isNaN(e)&&(e=e.replace(/'/g,"&#39;"));return e}(r),!$(s).find("input").length&&!$(s).find("select").length&&!$(s).find("textarea").length){var c=function(e,t,a){var n,s,r,c,l,i,o="",u="",d=!1;r={focus:!0,html:null},t.inputTypes&&$.each(t.inputTypes,(function(t,a){a.column==e&&(s=(n=a).type.toLowerCase())}));t.inputCss&&(c=t.inputCss);if(t.wrapperHtml){var m=t.wrapperHtml.split("{content}");2===m.length&&(o=m[0],u=m[1])}t.confirmationButton&&(t.confirmationButton.listenToKeys&&(d=t.confirmationButton.listenToKeys),l=t.confirmationButton.confirmCss,i=t.confirmationButton.cancelCss,s+="-confirm");switch(s){case"list":r.html=o+"<select class='"+c+"' onchange='$(this).updateEditableCell(this);'>",$.each(n.options,(function(e,t){a==t.value?r.html=r.html+"<option value='"+t.value+"' selected>"+t.display+"</option>":r.html=r.html+"<option value='"+t.value+"' >"+t.display+"</option>"})),r.html=r.html+"</select>"+u,r.focus=!1;break;case"list-confirm":r.html=o+"<select class='"+c+"'>",$.each(n.options,(function(e,t){a==t.value?r.html=r.html+"<option value='"+t.value+"' selected>"+t.display+"</option>":r.html=r.html+"<option value='"+t.value+"' >"+t.display+"</option>"})),r.html=r.html+"</select>&nbsp;<a href='javascript:void(0);' class='"+l+"' onclick='$(this).updateEditableCell(this);'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u,r.focus=!1;break;case"datepicker":case"datepicker-confirm":if("undefined"==typeof jQuery.ui){alert("jQuery UI is required for the DatePicker control but it is not loaded on the page!");break}jQuery(".datepick").datepicker("destroy"),r.html=o+"<input id='ejbeatycelledit' type='text' name='date' class='datepick "+c+"'   value='"+a+"'></input> &nbsp;<a href='javascript:void(0);' class='"+l+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u,setTimeout((function(){var e="http://jqueryui.com/resources/demos/datepicker/images/calendar.gif";"undefined"!==typeof n.options&&"undefined"!==typeof n.options.icon&&(e=n.options.icon);jQuery(".datepick").datepicker({showOn:"button",buttonImage:e,buttonImageOnly:!0,buttonText:"Select date"})}),100);break;case"text-confirm":case"undefined-confirm":r.html=o+"<input id='ejbeatycelledit' class='"+c+"' value='"+a+"'"+(d?" onkeyup='if(event.keyCode==13) {$(this).updateEditableCell(this);} else if (event.keyCode===27) {$(this).cancelEditableCell(this);}'":"")+"></input>&nbsp;<a href='javascript:void(0);' class='"+l+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u;break;case"textarea":case"textarea-confirm":r.html=o+"<textarea id='ejbeatycelledit' class='"+c+"'>"+a+"</textarea><a href='javascript:void(0);' class='"+l+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u;break;case"number-confirm":r.html=o+"<input id='ejbeatycelledit' type='number' class='"+c+"' value='"+a+"'"+(d?" onkeyup='if(event.keyCode==13) {$(this).updateEditableCell(this);} else if (event.keyCode===27) {$(this).cancelEditableCell(this);}'":"")+"></input>&nbsp;<a href='javascript:void(0);' class='"+l+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u;break;default:r.html=o+"<input id='ejbeatycelledit' class='"+c+"' onfocusout='$(this).updateEditableCell(this)' value='"+a+"' onkeyup='if(event.keyCode==13) {event.target.blur()}' ></input>"+u}return r}(a,e,r);$(s).html(c.html),c.focus&&$("#ejbeatycelledit").focus()}}}))}))},215:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n,s,r,c,l,i,o,u,d,m,p,h,b,f,v,E=a(3),g=a(4),y=a(11),j=a(10),N=a(12),C=a(0),k=a.n(C),S=a(17),O=a(39),w=a(37),_=a(19),x=a(2),T=a.n(x),D=function(){function e(t){Object(E.a)(this,e),this.options={cont:null,countdown:!0,date:{year:0,month:0,day:0,hour:0,minute:0,second:0},endCallback:null,outputFormat:"year|week|day|hour|minute|second",outputTranslation:{year:"Years",week:"Weeks",day:"Days",hour:"Hours",minute:"Minutes",second:"Seconds"}},this.lastTick=null,this.intervalsBySize=["year","week","day","hour","minute","second"],this.elementClassPrefix="countDown_",this.interval=null,this.digitConts={},this._assignOptions(this.options,t)}return Object(g.a)(e,[{key:"TIMESTAMP_SECOND",get:function(){return 1e3}},{key:"TIMESTAMP_MINUTE",get:function(){return 60*this.TIMESTAMP_SECOND}},{key:"TIMESTAMP_HOUR",get:function(){return 60*this.TIMESTAMP_MINUTE}},{key:"TIMESTAMP_DAY",get:function(){return 24*this.TIMESTAMP_HOUR}},{key:"TIMESTAMP_WEEK",get:function(){return 7*this.TIMESTAMP_DAY}},{key:"TIMESTAMP_YEAR",get:function(){return 365*this.TIMESTAMP_DAY}}]),Object(g.a)(e,[{key:"start",value:function(){var e,t,a=this;this._fixCompatibility(),e=this._getDate(this.options.date),t=this._prepareTimeByOutputFormat(e),this._writeData(t),this.lastTick=t,this.options.countdown&&e.getTime()<=Date.now()?"function"===typeof this.options.endCallback&&(this.stop(),this.options.endCallback()):this.interval=setInterval((function(){a._updateView(a._prepareTimeByOutputFormat(e))}),this.TIMESTAMP_SECOND)}},{key:"stop",value:function(){null!==this.interval&&clearInterval(this.interval)}},{key:"_getDate",value:function(e){if("object"===typeof e){if(e instanceof Date)return e;var t={day:0,month:0,year:0,hour:0,minute:0,second:0};for(var a in t)t.hasOwnProperty(a)&&e.hasOwnProperty(a)&&(t[a]=e[a]);return new Date(t.year,t.month>0?t.month-1:t.month,t.day,t.hour,t.minute,t.second)}return"number"===typeof e||"string"===typeof e?new Date(e):new Date}},{key:"_prepareTimeByOutputFormat",value:function(e){var t,a,n=this,s={};return t=this.intervalsBySize.filter((function(e){return-1!==n.options.outputFormat.split("|").indexOf(e)})),a=this.options.countdown?e.getTime()-Date.now():Date.now()-e.getTime(),t.forEach((function(e){var t;if(a>0)switch(e){case"year":t=Math.trunc(a/n.TIMESTAMP_YEAR),a-=t*n.TIMESTAMP_YEAR;break;case"week":t=Math.trunc(a/n.TIMESTAMP_WEEK),a-=t*n.TIMESTAMP_WEEK;break;case"day":t=Math.trunc(a/n.TIMESTAMP_DAY),a-=t*n.TIMESTAMP_DAY;break;case"hour":t=Math.trunc(a/n.TIMESTAMP_HOUR),a-=t*n.TIMESTAMP_HOUR;break;case"minute":t=Math.trunc(a/n.TIMESTAMP_MINUTE),a-=t*n.TIMESTAMP_MINUTE;break;case"second":t=Math.trunc(a/n.TIMESTAMP_SECOND),a-=t*n.TIMESTAMP_SECOND}else t="00";s[e]=((""+t).length<2?"0"+t:""+t).split("")})),s}},{key:"_fixCompatibility",value:function(){Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)}}},{key:"_writeData",value:function(e){var t,a=this,n='<div class="'.concat(this.elementClassPrefix,'cont">');for(t in e)if(e.hasOwnProperty(t)){var s='<div class="'.concat(this.elementClassPrefix,'_interval_basic_cont">\n                                       <div class="').concat(this._getIntervalContCommonClassName()," ").concat(this._getIntervalContClassName(t),'">'),r='<div class="'.concat(this.elementClassPrefix,'interval_basic_cont_description">\n                                                   ').concat(this.options.outputTranslation[t],"\n                                               </div>");e[t].forEach((function(e,t){s+='<div class="'.concat(a._getDigitContCommonClassName()," ").concat(a._getDigitContClassName(t),'">\n                                        ').concat(a._getDigitElementString(e,0),"\n                                    </div>")})),n+=s+"</div>"+r+"</div>"}this.options.cont.innerHTML=n+"</div>",this.lastTick=e}},{key:"_getDigitElementString",value:function(e,t){return'<div class="'.concat(this.elementClassPrefix,'digit_last_placeholder">\n                        <div class="').concat(this.elementClassPrefix,'digit_last_placeholder_inner">\n                            ').concat(t,'\n                        </div>\n                    </div>\n                    <div class="').concat(this.elementClassPrefix,'digit_new_placeholder">').concat(e,'</div>\n                    <div class="').concat(this.elementClassPrefix,'digit_last_rotate">').concat(t,'</div>\n                    <div class="').concat(this.elementClassPrefix,'digit_new_rotate">\n                        <div class="').concat(this.elementClassPrefix,'digit_new_rotated">\n                            <div class="').concat(this.elementClassPrefix,'digit_new_rotated_inner">\n                                ').concat(e,"\n                            </div>\n                        </div>\n                    </div>")}},{key:"_updateView",value:function(e){var t=this,a=function(a){e.hasOwnProperty(a)&&e[a].forEach((function(n,s){null!==t.lastTick&&t.lastTick[a][s]!==e[a][s]&&(t._getDigitCont(a,s).innerHTML=t._getDigitElementString(e[a][s],t.lastTick[a][s]))}))};for(var n in e)a(n);this.lastTick=e}},{key:"_getDigitCont",value:function(e,t){return this.digitConts["".concat(e,"_").concat(t)]||(this.digitConts["".concat(e,"_").concat(t)]=this.options.cont.querySelector(".".concat(this._getIntervalContClassName(e)," .").concat(this._getDigitContClassName(t)))),this.digitConts["".concat(e,"_").concat(t)]}},{key:"_getIntervalContClassName",value:function(e){return"".concat(this.elementClassPrefix,"interval_cont_").concat(e)}},{key:"_getIntervalContCommonClassName",value:function(){return"".concat(this.elementClassPrefix,"interval_cont")}},{key:"_getDigitContClassName",value:function(e){return"".concat(this.elementClassPrefix,"digit_cont_").concat(e)}},{key:"_getDigitContCommonClassName",value:function(){return"".concat(this.elementClassPrefix,"digit_cont")}},{key:"_assignOptions",value:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(null!==e[a]&&"object"===typeof e[a]&&"object"===typeof t[a]?this._assignOptions(e[a],t[a]):e[a]=t[a])}}]),e}(),A=(a(215),function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).el=k.a.createRef(),a.cd=null,a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e,t){e.start!=this.props.start&&(this.cd.stop(),this.init())}},{key:"init",value:function(){var e=new Date(this.props.start).getTime();if(this.props.end){var t=new Date(this.props.end).getTime();e=Date.now()-(t-e)}this.cd=new D({cont:this.el.current,countdown:!1,date:e,outputTranslation:{year:"Years",week:"Weeks",day:"Days",hour:"Hours",minute:"Minutes",second:"Seconds"},endCallback:null,outputFormat:"week|day|hour|minute|second"}),this.cd.start(),this.props.end&&this.cd.stop()}},{key:"render",value:function(){return k.a.createElement("div",{ref:this.el})}}]),t}(C.Component)),P=a(7),M=a(36),I=a.n(M),L=(a(28),a(29)),R=a(118),G=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).defaults={name:""},a.state={error:{},loading:!1,data:Object(P.a)({},a.defaults)},a.inputChanged=function(e,t){var n=t.target.value;a.setState((function(t){return t.data[e]=n}))},a.saveContinue=function(){a.submit().then((function(){a.setState({data:Object(P.a)({},a.defaults),error:{}})}))},a.save=function(){a.submit().then((function(){return a.props.close()}))},a.apply=function(){a.submit().then((function(){a.setState({error:{}})}))},a.submit=function(){var e=a.state.data;return a.setState({loading:!0}),a.props.submit(e).then((function(e){a.props.edit?Object(L.a)("Period Successfully Edited","success","nc-check-2"):Object(L.a)("Period Created Successfully","success","nc-check-2")}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e.response.data)})).finally((function(e){return a.setState({loading:!1})}))},a.delete=function(){Object(R.a)((function(){return axios.delete("/api/periods/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Deleted!",succes_text:"Period was deleted"}}),(function(e){throw{error:"Period couldn't be deleted."}}))}),{loading_title:"Deleting...",loading_text:"Deleting Period",canceled:"Deleting Period Operation Cancelled",consequence:"Period information will be lost"})},a.switchTo=function(){Object(R.a)((function(){return axios.post("/api/setup/periods/current",{id:a.props.data.id}).then((function(e){return a.props.close(),{success:"Switched!",succes_text:"Period was switched"}}),(function(e){throw{error:"Period couldn't be switched to."}}))}),{loading_title:"Switching...",loading_text:"Switching Period",canceled:"Switching Period Operation Cancelled",consequence:"Period will be activated and will be editable"})},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.edit&&(I.a.isEqual(this.props.data,e.data)||this.setState({data:Object(P.a)({},this.state.data,{},this.props.data)})),I.a.isEqual(this.props.error,e.error)||this.setState({error:Object(P.a)({},this.state.error,{},this.props.error)})}},{key:"render",value:function(){var e=this.state.error||{},t=e.errors&&e.errors.name?"is-invalid":"";return k.a.createElement("div",{className:"container-fluid",ref:this.elRef},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("div",{className:"card stacked-form"},k.a.createElement("div",{className:"card-header "},k.a.createElement("h4",{className:"card-title"},"Period Details",this.props.edit&&k.a.createElement("div",{className:"pull-right"},k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-warning",onClick:this.switchTo},"Switch To")))),k.a.createElement("div",{className:"card-body "},k.a.createElement("form",{method:"#",action:"#"},e.message&&k.a.createElement("div",{className:"alert alert-danger"},k.a.createElement("span",null,k.a.createElement("b",null," Error - ")," ",e.message)),k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,"Period Name"),k.a.createElement("input",{value:this.state.data.name,onChange:this.inputChanged.bind(this,"name"),type:"text",placeholder:"Period Name",className:"form-control ".concat(t)}),t&&e.errors.name.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})))),k.a.createElement("div",{className:"card-footer "},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.save,type:"button",value:"SAVE",disabled:this.state.loading,className:"btn btn-success"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.props.close,type:"button",value:"CLOSE",disabled:this.state.loading,className:"btn btn-warning"}))))))))}}]),t}(C.Component),U=a(115),q=(a(116),function(e){function t(e){var a;Object(E.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).state={period:{}},a.dataTable=k.a.createRef(),a.editPeriod=function(e){a.props.history.push("".concat(a.props.match.url,"/").concat(e))},a.closePeriod=function(){T.a.post("/api/setup/periods/close",{id:a.state.period.id}).then((function(e){a.setState({period:""})}))};var n=Object(w.a)(a);return window.periodListActionEdit=a.editPeriod,a.dataTableConfig={order:[[0,"desc"]],serverSide:!0,processing:!0,ajax:function(e,t,a){T.a.get("/api/setup/periods",{params:{params:e}}).then((function(e){t(e.data)}))},columns:[{data:"name",name:"name",class:"text-center"},{data:"created_at",name:"started",class:"text-center",render:function(e,t,a){return new Date(e).toDateString()}},{data:"end",name:"ended",class:"text-center",render:function(e,t,a){return e?new Date(e).toDateString():"Still running"}},{data:null,class:"text-center",render:function(e,t,a){return"<span>\n            <a onclick=\"periodListActionEdit('".concat(e.id,'\')" class="btn btn-link btn-warning details"><i class="fa fa-edit"></i></a>\n          </span>')}}],rowCallback:function(e,t){var a=$(e);a.tooltip("dispose"),n.state.period&&n.state.period.id==t.id?(a.tooltip({toggle:"tooltip",placement:"bottom",title:"Active"}),e.classList.add("table-success")):e.classList.remove("table-success")}},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;T.a.get("/api/setup/periods/current").then((function(t){e.setState({period:t.data}),e.dataTable.current.table.draw()}))}},{key:"componentWillUnmount",value:function(){$("tr[title]").tooltip("dispose")}},{key:"render",value:function(){var e=this.state.period,t=e.name,a=new Date(e.created_at).toDateString(),n=e.end?new Date(e.end).toDateString():"Still running";return k.a.createElement("div",{className:"container-fluid"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-sm-6"},k.a.createElement("div",{className:"card h-100"},k.a.createElement("div",{className:"card-body"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-4"},k.a.createElement("div",{style:{height:"100px",width:"100px",backgroundColor:"green",borderRadius:"50%"}})),k.a.createElement("div",{className:"col-8"},k.a.createElement("h5",{className:"card-title font-weight-light"},"Current Period"),e&&k.a.createElement("div",null,k.a.createElement("p",{className:"card-text font-weight-bold",style:{fontSize:"2rem"}},t),k.a.createElement("p",{className:"card-text"},k.a.createElement("span",{className:"font-weight-light font-italic"},"Started:")," ",k.a.createElement("span",{className:"badge badge-info"},a)),k.a.createElement("p",{className:"card-text"},k.a.createElement("span",{className:"font-weight-light font-italic"},"Ended:")," ",k.a.createElement("span",{className:"badge badge-dark"},n))),k.a.createElement("div",null,!e&&k.a.createElement("div",null,k.a.createElement("p",{className:"card-text font-weight-bold",style:{fontSize:"2rem"}},"No Active Period")))))))),k.a.createElement("div",{className:"col-sm-6"},!e.end&&k.a.createElement("h3",null,"Runtime"),e.end&&k.a.createElement("h3",null,"Lasted for"),k.a.createElement("div",null,k.a.createElement(A,{start:e.created_at,end:e.end})),k.a.createElement("div",null,e&&!e.end&&k.a.createElement("button",{onClick:this.closePeriod,className:"btn btn-danger"},"Close Period"),(!e||e.end)&&k.a.createElement(_.b,{to:"".concat(this.props.match.url,"/new"),className:"btn btn-success"},"Start New Period")))),k.a.createElement("br",null),k.a.createElement("br",null),k.a.createElement(U.a,{ref:this.dataTable,title:"Periods",config:this.dataTableConfig},k.a.createElement("th",null,"Name"),k.a.createElement("th",null,"Started"),k.a.createElement("th",null,"Ended"),k.a.createElement("th",{className:"disabled-sorting noExport"},"Action")))}}]),t}(C.Component)),Y=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{}},a.submit=function(e){return T.a.post("/api/setup/periods",e).then((function(e){return a.setState({error:{}}),e}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/periods")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return k.a.createElement(G,{error:this.state.error,submit:this.submit,close:this.close})}}]),t}(C.Component),B=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{},data:{}},a.submit=function(e){return T.a.put("/api/setup/periods/".concat(a.props.match.params.id),e).then((function(e){return a.setState({error:{}}),e}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/periods")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.student?this.setState({data:this.props.location.state.student}):this.props.match.params.id&&T.a.get("/api/setup/periods/".concat(this.props.match.params.id)).then((function(t){e.setState({data:t.data})}),(function(t){return e.setState({error:t.response.data})}))}},{key:"render",value:function(){return k.a.createElement(G,{edit:!0,error:this.state.error,data:this.state.data,submit:this.submit,close:this.close})}}]),t}(C.Component),V=a(38),H=a(120),F=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).edit=function(e){a.props.history.push("".concat(a.props.match.url,"/streams/").concat(e))},window.streamListActionEdit=a.edit,a.dataTable=k.a.createRef(),a.dataTableConfig={data:a.props.streams,columns:[{data:"name",name:"name",class:"text-center"},{data:"shorthand",name:"shorthand",class:"text-center"},{data:null,class:"text-center",render:function(e,t,a){return"<span>\n                      <a onclick=\"streamListActionEdit('".concat(e.id,'\')" class="btn btn-link btn-warning details"><i class="fa fa-edit"></i></a>\n                    </span>')}}],createdRow:function(e,t,a){t.close&&e.classList.add("table-danger")}},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.match;return k.a.createElement("div",null,k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("span",{className:"pull-right"},k.a.createElement(_.b,{to:"".concat(e.url,"/streams/new"),className:"btn btn-success details"},"Add Stream")))),k.a.createElement(U.a,{ref:this.dataTable,title:"Streams",config:this.dataTableConfig},k.a.createElement("th",null,"Name"),k.a.createElement("th",null,"Shorthand"),k.a.createElement("th",{className:"disabled-sorting text-center noExport"},"Actions")))}}]),t}(C.Component),W=Object(S.g)(F),z=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).defaults={name:""},a.state={error:{},loading:!1,data:Object(P.a)({},a.defaults),levels:[],levelChain:[],subLevelChains:{}},a.inputChanged=function(e,t){var n=t.target.value;a.setState((function(t){return t.data[e]=n}))},a.saveContinue=function(){a.submit().then((function(){a.setState({data:Object(P.a)({},a.defaults),error:{}})}))},a.save=function(){a.submit().then((function(){return a.props.close()}))},a.apply=function(){a.submit().then((function(){a.setState({error:{}})}))},a.submit=function(){var e=a.state.data;return a.setState({loading:!0}),a.props.submit(e).then((function(e){a.props.edit?Object(L.a)("Class Successfully Edited","success","nc-check-2"):Object(L.a)("Class Created Successfully","success","nc-check-2")}),(function(e){if(a.setState({error:e}),!e||"string"!=typeof e)return Promise.reject(e);Object(L.a)(e.response.data.error,"danger","nc-simple-remove")})).finally((function(e){return a.setState({loading:!1})}))},a.setLevel=function(e){var t=[],n={};for(var s in e&&function(){t=[e];var n=e;do{(n=a.state.levels.find((function(e){return e.id==n.level_id})))&&t.push(n)}while(n&&n.level_id)}(),t.reverse(),t)n[t[s].id]=a.state.levels.filter((function(e){return e.level_id==t[s].id}));a.setState((function(a){return a.levelChain=t,a.subLevelChains=n,a.data.level_id=e.id,a}))},a.delete=function(){Object(R.a)((function(){return a.props.delete().then((function(e){return a.props.close(),{success:"Deleted!",succes_text:"Class was deleted"}}),(function(e){throw{error:"Class couldn't be deleted."}}))}),{loading_title:"Deleting...",loading_text:"Deleting Class",canceled:"Deleting Class Operation Cancelled",consequence:"Class information will be lost"})},a.close=function(){Object(R.a)((function(){return axios.post("/api/setup/classes/close/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Closed!",succes_text:"Class was closed"}}),(function(e){throw{error:"Class couldn't be closed"}}))}),{loading_title:"Closing...",loading_text:"Closing Class",canceled:"Closing Class Operation Cancelled",consequence:"Class information will be archieved"})},a.restore=function(){Object(R.a)((function(){return axios.post("/api/setup/classes/restore/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Restored!",succes_text:"Class was restored"}}),(function(e){throw{error:"Class could not be restored."}}))}),{loading_title:"Restoring...",loading_text:"Restoring Class",canceled:"Restoring Class Operation Cancelled",consequence:"Class information will be made accessible again"})},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;axios.get("/api/setup/levels").then((function(t){e.setState({levels:t.data})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.props.edit&&(I.a.isEqual(this.props.data,e.data)||this.setState({data:Object(P.a)({},this.state.data,{},this.props.data)})),I.a.isEqual(this.props.error,e.error)||this.setState({error:Object(P.a)({},this.state.error,{},this.props.error)}),this.props.data&&this.props.data.level_id!=e.data.level_id){var n=this.state.levels.find((function(e){return e.id==a.props.data.level_id}));this.setLevel(n)}}},{key:"render",value:function(){var e=this,t=this.state,a=(t.classes,t.subjects,this.state.error||{}),n="",s="";a.errors&&(n=a.errors.name?"is-invalid":"",s=a.errors.start?"is-invalid":"");var r=this.state.levels,c=this.state.subLevelChains,l=r.filter((function(e){return null==e.level_id}));return k.a.createElement("div",{className:"container-fluid",ref:this.elRef},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("div",{className:"card stacked-form"},k.a.createElement("div",{className:"card-header "},k.a.createElement("h4",{className:"card-title"},"Class Details",this.props.edit&&k.a.createElement("div",{className:"pull-right"},this.state.data.close?k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-secondary",onClick:this.restore},"Restore"):k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-warning",onClick:this.close},"Close"),"\xa0",k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-danger",onClick:this.delete},"Delete")))),k.a.createElement("div",{className:"card-body "},k.a.createElement("form",{method:"#",action:"#"},a.message&&k.a.createElement("div",{className:"alert alert-danger"},k.a.createElement("span",null,k.a.createElement("b",null," Error - ")," ",a.message)),k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"form-group col-sm-6"},k.a.createElement("label",null,"Class Name"),k.a.createElement("input",{value:this.state.data.name,onChange:this.inputChanged.bind(this,"name"),type:"text",placeholder:"Class Name",className:"form-control ".concat(n)}),n&&a.errors.name.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"form-group col-sm-6"},k.a.createElement("label",null,"Start Date"),k.a.createElement(H.a,{value:this.state.data.start,onChange:this.inputChanged.bind(this,"start"),placeholder:"Start Date",className:"form-control ".concat(s)}),s&&a.errors.start.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"}))),k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-12"},k.a.createElement("ul",{className:"list-group list-group-horizontal-sm"},k.a.createElement("li",{className:"list-group-item"},k.a.createElement("div",{className:"btn-group dropright"},k.a.createElement("button",{type:"button",className:"btn btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Set Level"),k.a.createElement("div",{className:"dropdown-menu"},l.map((function(t){return k.a.createElement("a",{key:t.id,onClick:e.setLevel.bind(e,t),className:"dropdown-item"},t.name)}))))),this.state.levelChain.map((function(t){return k.a.createElement("li",{key:t.id,className:"list-group-item"},k.a.createElement("div",{className:"btn-group dropright"},k.a.createElement("button",{type:"button",className:"btn btn-secondary ".concat(c[t.id].length?"dropdown-toggle":""),"data-toggle":"".concat(c[t.id].length?"dropdown":""),"aria-haspopup":"true","aria-expanded":"false"},t.name),0!=c[t.id].length&&k.a.createElement("div",{className:"dropdown-menu"},c[t.id].map((function(t){return k.a.createElement("a",{key:t.id,onClick:e.setLevel.bind(e,t),className:"dropdown-item"},t.name)})))))}))))))),k.a.createElement("div",{className:"card-footer "},k.a.createElement("div",{className:"row"},this.props.edit?k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.apply,type:"button",value:"APPLY",disabled:this.state.loading,className:"btn btn-primary"})):k.a.createElement("div",{className:"col-sm-3"},k.a.createElement("input",{onClick:this.saveContinue,type:"button",value:"SAVE AND CONTINUE",disabled:this.state.loading,className:"btn btn-primary"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.save,type:"button",value:"SAVE",disabled:this.state.loading,className:"btn btn-success"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.props.close,type:"button",value:"CLOSE",disabled:this.state.loading,className:"btn btn-warning"}))))))),this.state.data.streams?k.a.createElement(W,{classId:this.state.data.id,streams:this.state.data.streams}):k.a.createElement("div",null))}}]),t}(C.Component),Q=Object(V.b)("teacherStore")(n=Object(V.b)("subjectStore")(n=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).defaults={name:"",shorthand:"",teacher_id:"",subjects:[]},a.state={error:{},loading:!1,teachers:null,subjects:null,data:Object(P.a)({},a.defaults)},a.inputChanged=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){return e.data[t]=n}))},a.saveContinue=function(){a.submit().then((function(){a.setState({data:Object(P.a)({},a.defaults),error:{}})}))},a.save=function(){a.submit().then((function(){return a.props.close()}))},a.apply=function(){a.submit().then((function(){a.setState({error:{}})}))},a.submit=function(){var e=a.state.data;return a.setState({loading:!0}),a.props.submit(e).then((function(e){a.props.edit?Object(L.a)("Stream Successfully Edited","success","nc-check-2"):Object(L.a)("Stream Created Successfully","success","nc-check-2")}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e.response.data)})).finally((function(e){return a.setState({loading:!1})}))},a.setSubjectTeacher=function(e){var t=a.state.data,n=e.target.name,s=t.subjects.findIndex((function(e){return e.subject_id==n}));-1!=s?t.subjects[s].teacher_id=e.target.value:t.subjects.push({teacher_id:e.target.value,subject_id:n}),a.setState({data:t})},a.subjectTeacher=function(e){var t=a.state.data.subjects.find((function(t){return t.subject_id==e}));return t?t.teacher_id:""},a.delete=function(){Object(R.a)((function(){return axios.delete("/api/setup/streams/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Deleted!",succes_text:"Stream was deleted"}}),(function(e){throw{error:"Stream couldn't be deleted."}}))}),{loading_title:"Deleting...",loading_text:"Deleting Stream",canceled:"Deleting Stream Operation Cancelled",consequence:"Stream information will be lost"})},a.close=function(){Object(R.a)((function(){return axios.post("/api/setup/streams/close/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Closed!",succes_text:"Stream was closed"}}),(function(e){throw{error:"Stream couldn't be closed"}}))}),{loading_title:"Closing...",loading_text:"Closing Stream",canceled:"Closing Stream Operation Cancelled",consequence:"Stream information will be archieved"})},a.restore=function(){Object(R.a)((function(){return axios.post("/api/setup/streams/restore/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Restored!",succes_text:"Stream was restored"}}),(function(e){throw{error:"Stream could not be restored."}}))}),{loading_title:"Restoring...",loading_text:"Restoring Stream",canceled:"Restoring Stream Operation Cancelled",consequence:"Stream information will be made accessible again"})},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.teacherStore.list({}).then((function(t){e.setState({teachers:t})})),this.props.subjectStore.list({}).then((function(t){e.setState({subjects:t})}))}},{key:"componentDidUpdate",value:function(e,t){this.props.edit&&(I.a.isEqual(this.props.data,e.data)||this.setState({data:Object(P.a)({},this.state.data,{},this.props.data)})),I.a.isEqual(this.props.error,e.error)||this.setState({error:Object(P.a)({},this.state.error,{},this.props.error)})}},{key:"render",value:function(){var e=this,t=this.state.error||{},a="",n="",s="";t.errors&&(a=t.errors.name?"is-invalid":"",n=t.errors.shorthand?"is-invalid":"",s=t.errors.teacher_id?"is-invalid":"");var r=this.state,c=r.subjects,l=r.teachers;return k.a.createElement("div",{className:"container-fluid"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("div",{className:"card stacked-form"},k.a.createElement("div",{className:"card-header "},k.a.createElement("h4",{className:"card-title"},"Stream Details",this.props.edit&&k.a.createElement("div",{className:"pull-right"},this.state.data.close?k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-secondary",onClick:this.restore},"Restore"):k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-warning",onClick:this.close},"Close"),"\xa0",k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-danger",onClick:this.delete},"Delete")))),k.a.createElement("div",{className:"card-body "},k.a.createElement("form",{method:"#",action:"#"},t.message&&k.a.createElement("div",{className:"alert alert-danger"},k.a.createElement("span",null,k.a.createElement("b",null," Error - ")," ",t.message)),k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"form-group col-sm-6"},k.a.createElement("label",null,"Name"),k.a.createElement("input",{value:this.state.data.name,onChange:this.inputChanged,name:"name",type:"text",placeholder:"Stream Name",className:"form-control ".concat(a)}),a&&t.errors.name.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"form-group col-sm-6"},k.a.createElement("label",null,"Shorthand"),k.a.createElement("input",{value:this.state.data.shorthand,onChange:this.inputChanged,name:"shorthand",type:"text",placeholder:"Stream Shorthand",className:"form-control ".concat(n)}),n&&t.errors.shorthand.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"}))),k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,"Stream Teacher"),k.a.createElement("select",{value:this.state.data.teacher_id||"",onChange:this.inputChanged,name:"teacher_id",className:"form-control ".concat(s)},k.a.createElement("option",{value:""},"Select Teacher"),l&&l.map((function(e){return k.a.createElement("option",{key:e.id,value:e.id},e.firstname," ",e.lastname)}))),s&&t.errors.teacher.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",null,k.a.createElement("label",null,"Subjects Done"),c&&c.map((function(t){return k.a.createElement("div",{key:t.id,className:"form-group row"},k.a.createElement("label",{className:"col-sm-2 col-form-label"},t.name),k.a.createElement("div",{className:"col-10"},k.a.createElement("select",{value:e.subjectTeacher(t.id),onChange:e.setSubjectTeacher,name:t.id,className:"form-control"},k.a.createElement("option",{value:""},"Select Teacher"),l&&l.map((function(e){return k.a.createElement("option",{key:e.id,value:e.id},e.firstname," ",e.lastname)})))))}))))),k.a.createElement("div",{className:"card-footer "},k.a.createElement("div",{className:"row"},this.props.edit?k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.apply,type:"button",value:"APPLY",disabled:this.state.loading,className:"btn btn-primary"})):k.a.createElement("div",{className:"col-sm-3"},k.a.createElement("input",{onClick:this.saveContinue,type:"button",value:"SAVE AND CONTINUE",disabled:this.state.loading,className:"btn btn-primary"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.save,type:"button",value:"SAVE",disabled:this.state.loading,className:"btn btn-success"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.props.close,type:"button",value:"CLOSE",disabled:this.state.loading,className:"btn btn-warning"}))))))))}}]),t}(C.Component))||n)||n,K=Object(V.b)("classesStore")(c=function(e){function t(e){var a;Object(E.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).edit=function(e){a.props.history.push("".concat(a.props.match.url,"/").concat(e))},window.studentListActionEdit=a.edit;var n=Object(w.a)(a);return a.dataTable=k.a.createRef(),a.dataTableConfig={serverSide:!1,processing:!1,ajax:function(e,t,a){n.props.classesStore.list(e,!0).then((function(e){t({data:e})}))},columns:[{data:"name",name:"name",class:"text-center"},{data:"start",name:"start",class:"text-center",render:function(e,t,a){return new Date(e).toDateString()}},{data:null,class:"text-center",render:function(e,t,a){return"<span>\n              <a onclick=\"studentListActionEdit('".concat(e.id,'\')" class="btn btn-link btn-warning details"><i class="fa fa-edit"></i></a>\n          </span>')}}],createdRow:function(e,t,a){t.close&&e.classList.add("table-danger")}},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.match;return k.a.createElement("div",{className:"container-fluid"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("span",{className:"pull-right"},k.a.createElement(_.b,{className:"btn btn-success details",to:"".concat(e.url,"/new")},"New Class")))),k.a.createElement(U.a,{ref:this.dataTable,title:"Classes",config:this.dataTableConfig},k.a.createElement("th",null,"Name"),k.a.createElement("th",null,"Start"),k.a.createElement("th",{className:"disabled-sorting text-center noExport"},"Actions")))}}]),t}(C.Component))||c,J=Object(V.b)("classesStore")(s=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{}},a.submit=function(e){return a.props.classesStore.create(e).then((function(e){return a.setState({error:{},data:e}),e}),(function(e){return a.setState({error:e}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/classes")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return k.a.createElement(z,{error:this.state.error,submit:this.submit,close:this.close})}}]),t}(C.Component))||s,X=Object(V.b)("classesStore")(r=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{},data:{}},a.submit=function(e){return console.log(e),a.props.classesStore.update(e).then((function(e){return a.setState({error:{},data:e}),e}),(function(e){return a.setState({error:e}),Promise.reject(e)}))},a.delete=function(){return a.props.classesStore.delete(a.props.match.params.classId)},a.close=function(){a.props.history.push("/school/setup/classes")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.cls?this.setState({data:this.props.location.state.cls}):this.props.match.params.classId&&this.props.classesStore.get(this.props.match.params.classId).then((function(t){e.setState({data:t})}),(function(t){return e.setState({error:t})}))}},{key:"render",value:function(){return k.a.createElement(z,{edit:!0,error:this.state.error,data:this.state.data,submit:this.submit,delete:this.delete,close:this.close})}}]),t}(C.Component))||r,Z=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{}},a.submit=function(e){return axios.post("/api/setup/classes/".concat(a.props.match.params.classId,"/streams"),e).then((function(e){return a.setState({error:{}}),e}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/classes/".concat(a.props.match.params.classId))},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return k.a.createElement(Q,{error:this.state.error,submit:this.submit,close:this.close})}}]),t}(C.Component),ee=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{},data:{}},a.submit=function(e){return axios.put("/api/setup/classes/".concat(a.props.match.params.classId,"/streams/").concat(a.props.match.params.streamId),e).then((function(e){return a.setState({error:{}}),e}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/classes/".concat(a.props.match.params.classId))},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.stream?this.setState({data:this.props.location.state.stream}):this.props.match.params.streamId&&axios.get("/api/setup/classes/".concat(this.props.match.params.classId,"/streams/").concat(this.props.match.params.streamId)).then((function(t){e.setState({data:t.data.data})}),(function(t){return e.setState({error:t.response.data})}))}},{key:"render",value:function(){return k.a.createElement(Q,{edit:!0,error:this.state.error,data:this.state.data,submit:this.submit,close:this.close})}}]),t}(C.Component),te=Object(V.b)("subjectGroupStore")(l=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).defaults={name:"",shorthand:""},a.state={error:{},loading:!1,data:Object(P.a)({},a.defaults),subjectGroups:null},a.inputChanged=function(e,t){var n=t.target.value;a.setState((function(t){return t.data[e]=n}))},a.saveContinue=function(){a.submit().then((function(){a.setState({data:Object(P.a)({},a.defaults),error:{}})}))},a.save=function(){a.submit().then((function(){return a.props.close()}))},a.apply=function(){a.submit().then((function(){a.setState({error:{}})}))},a.submit=function(){var e=a.state.data;return a.setState({loading:!0}),a.props.submit(e).then((function(e){a.props.edit?Object(L.a)("Subject Successfully Edited","success","nc-check-2"):Object(L.a)("Subject Created Successfully","success","nc-check-2")}),(function(e){return a.setState({error:e}),Promise.reject(e)})).finally((function(e){return a.setState({loading:!1})}))},a.delete=function(){Object(R.a)((function(){return axios.delete("/api/setup/subjects/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Deleted!",succes_text:"Subject was deleted"}}),(function(e){throw{error:"Subject couldn't be deleted."}}))}),{loading_title:"Deleting...",loading_text:"Deleting Subject",canceled:"Deleting Subject Operation Cancelled",consequence:"Subject information will be lost"})},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.subjectGroupStore.list({}).then((function(t){e.setState({subjectGroups:t})}))}},{key:"componentDidUpdate",value:function(e,t){this.props.edit&&(I.a.isEqual(this.props.data,e.data)||this.setState({data:Object(P.a)({},this.state.data,{},this.props.data)})),I.a.isEqual(this.props.error,e.error)||this.setState({error:Object(P.a)({},this.state.error,{},this.props.error)})}},{key:"render",value:function(){var e=this.state,t=(e.classes,e.subjects,this.state.error||{}),a="",n="",s="";return t.errors&&(a=t.errors.name?"is-invalid":"",n=t.errors.shorthand?"is-invalid":"",s=t.errors.subject_group_id?"is-invalid":""),k.a.createElement("div",{className:"container-fluid",ref:this.elRef},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("div",{className:"card stacked-form"},k.a.createElement("div",{className:"card-header "},k.a.createElement("h4",{className:"card-title"},"Subject Details",this.props.edit&&k.a.createElement("div",{className:"pull-right"},k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-danger",onClick:this.delete},"Delete")))),k.a.createElement("div",{className:"card-body "},k.a.createElement("form",{method:"#",action:"#"},t.message&&k.a.createElement("div",{className:"alert alert-danger"},k.a.createElement("span",null,k.a.createElement("b",null," Error - ")," ",t.message)),k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,"Subject Name"),k.a.createElement("input",{value:this.state.data.name,onChange:this.inputChanged.bind(this,"name"),type:"text",placeholder:"Subject Name",className:"form-control ".concat(a)}),a&&t.errors.name.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,"Shorthand"),k.a.createElement("input",{value:this.state.data.shorthand,onChange:this.inputChanged.bind(this,"shorthand"),type:"text",placeholder:"Shorthand",className:"form-control ".concat(n)}),n&&t.errors.shorthand.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,"Subject Group"),k.a.createElement("select",{value:this.state.data.subject_group_id,onChange:this.inputChanged.bind(this,"subject_group_id"),className:"form-control ".concat(s)},k.a.createElement("option",null," -- Select Subject Group -- "),this.state.subjectGroups&&this.state.subjectGroups.map((function(e){return k.a.createElement("option",{key:e.id,value:e.id},e.name)}))),s&&t.errors.subject_group_id.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})))),k.a.createElement("div",{className:"card-footer "},k.a.createElement("div",{className:"row"},this.props.edit?k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.apply,type:"button",value:"APPLY",disabled:this.state.loading,className:"btn btn-primary"})):k.a.createElement("div",{className:"col-sm-3"},k.a.createElement("input",{onClick:this.saveContinue,type:"button",value:"SAVE AND CONTINUE",disabled:this.state.loading,className:"btn btn-primary"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.save,type:"button",value:"SAVE",disabled:this.state.loading,className:"btn btn-success"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.props.close,type:"button",value:"CLOSE",disabled:this.state.loading,className:"btn btn-warning"}))))))))}}]),t}(C.Component))||l,ae=Object(V.b)("subjectStore")(u=function(e){function t(e){var a;Object(E.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).edit=function(e){a.props.history.push("".concat(a.props.match.url,"/").concat(e))},window.studentListActionEdit=a.edit;var n=Object(w.a)(a);return a.dataTable=k.a.createRef(),a.dataTableConfig={serverSide:!1,processing:!1,ajax:function(e,t,a){n.props.subjectStore.list(e).then((function(e){t({data:e})}))},columns:[{data:"name",name:"name",class:"text-center"},{data:"shorthand",name:"shorthand",class:"text-center"},{data:null,class:"text-center",render:function(e,t,a){return"<span>\n                  <a onclick=\"studentListActionEdit('".concat(e.id,'\')" class="btn btn-link btn-warning details"><i class="fa fa-edit"></i></a>\n              </span>')}}]},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.match;return k.a.createElement("div",{className:"container-fluid"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("span",{className:"pull-right"},k.a.createElement(_.b,{className:"btn btn-success details",to:"".concat(e.url,"/new")},"New Subject")))),k.a.createElement(U.a,{ref:this.dataTable,title:"Subjects",config:this.dataTableConfig},k.a.createElement("th",null,"Name"),k.a.createElement("th",null,"Shorthand"),k.a.createElement("th",{className:"disabled-sorting text-center noExport"},"Actions")))}}]),t}(C.Component))||u,ne=Object(V.b)("subjectStore")(i=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{}},a.submit=function(e){return a.props.subjectStore.create(e).then((function(e){return a.setState({error:{},data:e}),e}),(function(e){return a.setState({error:e}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/subjects")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return k.a.createElement(te,{data:this.state.data,error:this.state.error,submit:this.submit,close:this.close})}}]),t}(C.Component))||i,se=Object(V.b)("subjectStore")(o=Object(V.b)("subjectGroupStore")(o=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{},data:{}},a.submit=function(e){return a.props.subjectStore.update(e).then((function(e){return a.setState({error:{},data:e}),e}),(function(e){return a.setState({error:e}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/subjects")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.subject?this.setState({data:this.props.location.state.subject}):this.props.match.params.id&&this.props.subjectStore(this.props.match.params.id).then((function(t){e.setState({data:t})}),(function(t){return e.setState({error:t})}))}},{key:"render",value:function(){return k.a.createElement(te,{edit:!0,error:this.state.error,data:this.state.data,submit:this.submit,close:this.close})}}]),t}(C.Component))||o)||o,re=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).defaults={name:"",shorthand:""},a.state={error:{},loading:!1,data:Object(P.a)({},a.defaults)},a.inputChanged=function(e,t){var n=t.target.value;a.setState((function(t){return t.data[e]=n}))},a.saveContinue=function(){a.submit().then((function(){a.setState({data:Object(P.a)({},a.defaults),error:{}})}))},a.save=function(){a.submit().then((function(){return a.props.close()}))},a.apply=function(){a.submit().then((function(){a.setState({error:{}})}))},a.submit=function(){var e=a.state.data;return a.setState({loading:!0}),a.props.submit(e).then((function(e){a.props.edit?Object(L.a)("Subject Group Successfully Edited","success","nc-check-2"):Object(L.a)("Subject Group Created Successfully","success","nc-check-2")}),(function(e){return a.setState({error:e}),Promise.reject(e)})).finally((function(e){return a.setState({loading:!1})}))},a.delete=function(){Object(R.a)((function(){return axios.delete("/api/setup/subject-groups/".concat(a.props.data.id)).then((function(e){return a.props.close(),{success:"Deleted!",succes_text:"Subject Group was deleted"}}),(function(e){throw{error:"Subject Group couldn't be deleted."}}))}),{loading_title:"Deleting...",loading_text:"Deleting Subject Group",canceled:"Deleting Subject Group Operation Cancelled",consequence:"Subject Group information will be lost"})},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.edit&&(I.a.isEqual(this.props.data,e.data)||this.setState({data:Object(P.a)({},this.state.data,{},this.props.data)})),I.a.isEqual(this.props.error,e.error)||this.setState({error:Object(P.a)({},this.state.error,{},this.props.error)})}},{key:"render",value:function(){var e=this.state.error||{},t=e.errors&&e.errors.name?"is-invalid":"";return k.a.createElement("div",{className:"container-fluid",ref:this.elRef},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("div",{className:"card stacked-form"},k.a.createElement("div",{className:"card-header "},k.a.createElement("h4",{className:"card-title"},"Subject Group Details",this.props.edit&&k.a.createElement("div",{className:"pull-right"},k.a.createElement("button",{type:"button",disabled:this.state.loading,className:"btn btn-danger",onClick:this.delete},"Delete")))),k.a.createElement("div",{className:"card-body "},k.a.createElement("form",{method:"#",action:"#"},e.message&&k.a.createElement("div",{className:"alert alert-danger"},k.a.createElement("span",null,k.a.createElement("b",null," Error - ")," ",e.message)),k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,"Subject Group Name"),k.a.createElement("input",{value:this.state.data.name,onChange:this.inputChanged.bind(this,"name"),type:"text",placeholder:"Group Name",className:"form-control ".concat(t)}),t&&e.errors.name.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})))),k.a.createElement("div",{className:"card-footer "},k.a.createElement("div",{className:"row"},this.props.edit?k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.apply,type:"button",value:"APPLY",disabled:this.state.loading,className:"btn btn-primary"})):k.a.createElement("div",{className:"col-sm-3"},k.a.createElement("input",{onClick:this.saveContinue,type:"button",value:"SAVE AND CONTINUE",disabled:this.state.loading,className:"btn btn-primary"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.save,type:"button",value:"SAVE",disabled:this.state.loading,className:"btn btn-success"})),k.a.createElement("div",{className:"col-sm-2"},k.a.createElement("input",{onClick:this.props.close,type:"button",value:"CLOSE",disabled:this.state.loading,className:"btn btn-warning"}))))))))}}]),t}(C.Component),ce=Object(V.b)("subjectGroupStore")(p=function(e){function t(e){var a;Object(E.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).edit=function(e){a.props.history.push("".concat(a.props.match.url,"/").concat(e))},window.subjectGroupListActionEdit=a.edit;var n=Object(w.a)(a);return a.dataTable=k.a.createRef(),a.dataTableConfig={serverSide:!1,processing:!1,ajax:function(e,t,a){n.props.subjectGroupStore.list(e).then((function(e){t({data:e})}))},columns:[{data:"name",name:"name",class:"text-center"},{data:null,class:"text-center",render:function(e,t,a){return"<span>\n                  <a onclick=\"subjectGroupListActionEdit('".concat(e.id,'\')" class="btn btn-link btn-warning details"><i class="fa fa-edit"></i></a>\n              </span>')}}]},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.match;return k.a.createElement("div",{className:"container-fluid"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12"},k.a.createElement("span",{className:"pull-right"},k.a.createElement(_.b,{className:"btn btn-success details",to:"".concat(e.url,"/new")},"New Subject Group")))),k.a.createElement(U.a,{ref:this.dataTable,title:"Subject Groups",config:this.dataTableConfig},k.a.createElement("th",null,"Name"),k.a.createElement("th",{className:"disabled-sorting text-center noExport"},"Actions")))}}]),t}(C.Component))||p,le=Object(V.b)("subjectGroupStore")(d=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{}},a.submit=function(e){return a.props.subjectGroupStore.create(e).then((function(e){return a.setState({error:{}}),e}),(function(e){return a.setState({error:e}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/subject-groups")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return k.a.createElement(re,{error:this.state.error,submit:this.submit,close:this.close})}}]),t}(C.Component))||d,ie=Object(V.b)("subjectGroupStore")(m=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s)))).state={error:{},data:{}},a.submit=function(e){return a.props.subjectGroupStore.update(e).then((function(e){return a.setState({error:{},data:e}),e}),(function(e){return a.setState({error:e}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/setup/subject-groups")},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.subjectGroupId?this.setState({data:this.props.location.state.subjectGroupId}):this.props.match.params.subjectGroupId&&this.props.subjectGroupStore.get(this.props.match.params.subjectGroupId).then((function(t){e.setState({data:t})}),(function(t){return e.setState({error:t})}))}},{key:"render",value:function(){return k.a.createElement(re,{edit:!0,error:this.state.error,data:this.state.data,submit:this.submit,close:this.close})}}]),t}(C.Component))||m,oe=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).updateValue=function(e,t,a){var n=t.data().min,s=t.data().max,r=t.data().symbol;return T.a.post("/api/setup/grades",{min:n,max:s,symbol:r})},a.dataTable=k.a.createRef(),a.dataTableConfig={ordering:!1,paging:!1,searching:!1,serverSide:!0,processing:!0,ajax:function(e,t,a){T.a.get("/api/setup/grades",{params:{params:e}}).then((function(e){t(e.data)}))},columns:[{data:"symbol",name:"symbol",class:"text-center"},{data:"min",name:"min",class:"text-center",render:function(e,t,a){return a.min?a.min:"-"}},{data:"max",name:"max",class:"text-center",render:function(e,t,a){return a.max?a.max:"-"}}],dom:"lfrtip"},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.dataTable.current.table.MakeCellsEditable({onUpdate:this.updateValue,columns:[1,2]})}},{key:"render",value:function(){this.props.match;return k.a.createElement("div",{className:"container-fluid"},k.a.createElement(U.a,{ref:this.dataTable,title:"Grades",config:this.dataTableConfig},k.a.createElement("th",null,"Grade"),k.a.createElement("th",null,"Min"),k.a.createElement("th",null,"Max")))}}]),t}(C.Component),ue=a(57),de=a(27),me=(a(63),a(24)),pe=a(5),he=Object(V.c)((f=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=Object(y.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(s))),Object(ue.a)(a,"levels",v,Object(w.a)(a)),a.state={loading:!1,name:"",shorthand:"",error:{}},a.addLevel=function(){var e={name:a.state.name,shorthand:a.state.shorthand};a.setState({loading:!0}),axios.post("/api/setup/levels",e).then((function(e){a.levels.push(e.data),a.setState({name:"",shorthand:"",error:{}})}),(function(e){a.setState({error:e.response.data})})).finally((function(){return a.setState({loading:!1})}))},a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;axios.get("/api/setup/levels").then((function(t){Object(pe.r)(e.levels,t.data)}))}},{key:"inputChanged",value:function(e,t){this.setState(Object(me.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this.levels,t=e.filter((function(e){return null==e.level_id})).sort((function(e,t){return e.pos>t.pos})),a=this.state.error.errors||{},n=a.name?"is-invalid":"",s=a.shorthand?"is-invalid":"";return k.a.createElement("div",{className:"container-fluid"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-12"},t.map((function(t){return k.a.createElement(be,{key:t.id,level:t,levels:e})}))),k.a.createElement("div",{className:"col-12"},k.a.createElement("div",{className:"card"},k.a.createElement("div",{className:"card-body"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"form-group col-5"},k.a.createElement("input",{type:"text",value:this.state.name,onChange:this.inputChanged.bind(this,"name"),className:"form-control ".concat(n),placeholder:"Name"}),a.name&&a.name.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"form-group col-5"},k.a.createElement("input",{type:"text",value:this.state.shorthand,onChange:this.inputChanged.bind(this,"shorthand"),className:"form-control ".concat(s),placeholder:"Shorthand"}),a.shorthand&&a.shorthand.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"col-2"},k.a.createElement("input",{type:"button",onClick:this.addLevel,disabled:this.state.loading,className:"btn btn-primary",value:"Add Level"}))))))))}}]),t}(C.Component),v=Object(de.a)(f.prototype,"levels",[pe.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=f))||b,be=Object(V.c)(h=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).editLevel=function(){var e={name:a.state.name,shorthand:a.state.shorthand};a.setState({loading:!0}),axios.put("/api/setup/levels/".concat(a.state.activeLevel.id),e).then((function(e){var t=a.props.levels.findIndex((function(e){return e.id==a.state.activeLevel.id}));a.props.levels[t]=e.data,a.setState({newName:"",newShorthand:"",error:{}})}),(function(e){a.setState({error:e.response.data})})).finally((function(){return a.setState({loading:!1})}))},a.addSubLevel=function(){var e={name:a.state.newName,shorthand:a.state.newShorthand,level_id:a.state.activeLevel.id};a.setState({loading:!0}),axios.post("/api/setup/levels",e).then((function(e){a.props.levels.push(e.data),a.setState({newName:"",newShorthand:"",error:{}})}),(function(e){a.setState({error:e.response.data})})).finally((function(){return a.setState({loading:!1})}))},a.delete=function(){Object(R.a)((function(){return axios.delete("/api/setup/levels/".concat(a.state.activeLevel.id)).then((function(e){var t=a.props.levels[a.props.levels.findIndex((function(e){return e.id==a.state.activeLevel.level_id}))],n=a.props.levels.findIndex((function(e){return e.id==a.state.activeLevel.id}));return a.props.levels.splice(n,1),a.setActiveLevel(t),{success:"Deleted!",succes_text:"Level was deleted"}}),(function(e){throw{error:"Level couldn't be deleted."}}))}),{loading_title:"Deleting...",loading_text:"Deleting Level",canceled:"Deleting Level Operation Cancelled",consequence:"Level information will be lost"})},a.state={loading:!1,name:"",shorhand:"",newName:"",newShorthand:"",activeLevel:null,error:{}},a.props.level&&(a.state.name=a.props.level.name,a.state.shorthand=a.props.level.shorthand),a}return Object(N.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.setActiveLevel(this.props.level)}},{key:"componentDidUpdate",value:function(e,t){I.a.isEqual(this.props.level,e.level)||this.setActiveLevel(this.props.level)}},{key:"inputChanged",value:function(e,t){this.setState(Object(me.a)({},e,t.target.value))}},{key:"setActiveLevel",value:function(e){if(e){var t=[e],a=e;do{(a=this.props.levels.find((function(e){return e.id==a.level_id})))&&t.push(a)}while(a&&a.level_id);t.reverse(),this.setState({levelChain:t,activeLevel:e,name:e.name,shorthand:e.shorthand})}}},{key:"render",value:function(){var e=this,t=this.state.activeLevel,a=this.props.levels.filter((function(e){return e.level_id==(t&&t.id)})).sort((function(e,t){return e.pos>t.pos})),n=this.state.levelChain||[],s=this.state.error.errors||{},r=s.name?"is-invalid":"",c=s.shorthand?"is-invalid":"";return k.a.createElement("div",{className:"card"},k.a.createElement("div",{className:"card-header"},k.a.createElement("div",null,k.a.createElement("nav",{"aria-label":"breadcrumb"},k.a.createElement("ol",{className:"breadcrumb"},n.map((function(t){return k.a.createElement("li",{key:t.id,className:"breadcrumb-item active","aria-current":"page"},k.a.createElement("button",{type:"button",onClick:e.setActiveLevel.bind(e,t),className:"btn btn-secondary"},t.name," ",k.a.createElement("span",{className:"badge badge-success"},t.shorthand)))})))))),k.a.createElement("div",{className:"card-body"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-8"},k.a.createElement("div",{className:"list-group"},a.map((function(t){return k.a.createElement("button",{key:t.id,type:"button",onClick:e.setActiveLevel.bind(e,t),className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},t.name," ",k.a.createElement("span",{className:"badge badge-info"},t.shorthand))}))),k.a.createElement("div",{className:"row mt-3 justify-content-center"},k.a.createElement("div",{className:"form-group col-4"},k.a.createElement("input",{type:"text",value:this.state.newName,onChange:this.inputChanged.bind(this,"newName"),className:"form-control ".concat(r),placeholder:"Name"}),s.name&&s.name.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"form-group col-4"},k.a.createElement("input",{type:"text",value:this.state.newShorthand,onChange:this.inputChanged.bind(this,"newShorthand"),className:"form-control ".concat(c),placeholder:"Shorthand"}),s.shorthand&&s.shorthand.map((function(e,t){return k.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},k.a.createElement("strong",null,e))})),k.a.createElement("p",{className:"help-block help-block-error"})),k.a.createElement("div",{className:"col-2"},k.a.createElement("input",{type:"button",onClick:this.addSubLevel,disabled:this.state.loading,className:"btn btn-primary",value:"Add Sub Level"})))),k.a.createElement("div",{className:"col-4"},k.a.createElement("div",{className:"col-12 border border-secondary rounded"},k.a.createElement("div",{className:"mb-2 mt-2"},k.a.createElement("input",{type:"text",className:"form-control",value:this.state.name,onChange:this.inputChanged.bind(this,"name"),placeholder:"Name"})),k.a.createElement("div",{className:"mb-2"},k.a.createElement("input",{type:"text",className:"form-control",value:this.state.shorthand,onChange:this.inputChanged.bind(this,"shorthand"),placeholder:"Shorhand"})),k.a.createElement("div",{className:"mb-2"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col"},k.a.createElement("button",{type:"button",onClick:this.editLevel,disabled:this.state.loading,className:"btn btn-success btn-sm btn-block"},"Edit")),k.a.createElement("div",{className:"col"},k.a.createElement("button",{onClick:this.delete,type:"button",className:"btn btn-danger btn-sm btn-block"},"Delete")))))))))}}]),t}(C.Component))||h;a.d(t,"default",(function(){return fe}));var fe=function(e){function t(){return Object(E.a)(this,t),Object(y.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.match;return k.a.createElement(O.a,null,k.a.createElement(S.b,{path:"".concat(e.path,"/periods/new"),render:function(e){return k.a.createElement(Y,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/periods/:id"),render:function(e){return k.a.createElement(B,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/periods/"),render:function(e){return k.a.createElement(q,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/classes/new"),render:function(e){return k.a.createElement(J,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/classes/:classId/streams/new"),render:function(e){return k.a.createElement(Z,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/classes/:classId/streams/:streamId"),render:function(e){return k.a.createElement(ee,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/classes/:classId"),render:function(e){return k.a.createElement(X,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/classes"),render:function(e){return k.a.createElement(K,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/subject-groups/new"),render:function(e){return k.a.createElement(le,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/subject-groups/:subjectGroupId"),render:function(e){return k.a.createElement(ie,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/subject-groups"),render:function(e){return k.a.createElement(ce,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/subjects/new"),render:function(e){return k.a.createElement(ne,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/subjects/:id"),render:function(e){return k.a.createElement(se,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/subjects"),render:function(e){return k.a.createElement(ae,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/grades"),render:function(e){return k.a.createElement(oe,e)}}),k.a.createElement(S.b,{path:"".concat(e.path,"/levels"),render:function(e){return k.a.createElement(he,e)}}),k.a.createElement(S.b,{path:""},k.a.createElement("h1",null,"404 Not Found")))}}]),t}(C.Component)}}]);
//# sourceMappingURL=9.260a4493.chunk.js.map