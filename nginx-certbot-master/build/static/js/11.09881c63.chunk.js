/*! For license information please see 11.09881c63.chunk.js.LICENSE.txt */
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[11],{115:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(7),r=a(3),s=a(4),l=a(11),c=a(10),i=a(37),o=a(12),u=a(0),d=a.n(u),m=a(36),p=a.n(m),h=(a(123),a(127),a(128),a(129),a(130),a(131),a(132),a(133),a(134),a(135),a(136),a(122),function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).tableEl=d.a.createRef(),a.state={},a.table=null,a.draw=function(){a.table.draw()},a.highlightRow=function(e,t){var n=$(e);n.tooltip("dispose");var r="";if(t.__meta_pending){r="Pending - ";var s="table-dark";if(t.__meta_error&&t.__meta_error.message){s="Network Error"!==t.__meta_error.message?"table-warning":s;var l=t.__meta_error;if(r+=l.message,l.errors)for(var c=0,i=Object.keys(l.errors);c<i.length;c++){var o=i[c];r+="\n"+l.errors[o]}}e.classList.add(s)}else t[a.props.softDeleteField]?(r="Discontinued",e.classList.add("table-danger")):(e.classList.remove("table-warning"),e.classList.remove("table-dark"),e.classList.remove("table-danger"));r&&n.tooltip({toggle:"tooltip",placement:"bottom",title:r})};var n=Object(i.a)(a);return a.defaultConfig={pagingType:"full_numbers",lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],dom:'rt<"bottom"lpi><"clear">',buttons:[{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o text-info"></i>',titleAttr:"Excel",exportOptions:{columns:"thead th:not(.noExport)"}}],responsive:!0,language:{search:"_INPUT_",searchPlaceholder:"Search records"},rowCallback:function(e,t){var a=$(e);a.tooltip("dispose");var r="";if(t.__meta_pending){r="Pending - ";var s="table-dark";if(t.__meta_error&&t.__meta_error.message){s="Network Error"!==t.__meta_error.message?"table-warning":s;var l=t.__meta_error;if(r+=l.message,l.errors)for(var c=0,i=Object.keys(l.errors);c<i.length;c++){var o=i[c];r+="\n"+l.errors[o]}}e.classList.add(s)}else t[n.props.softDeleteField]?(r="Discontinued",e.classList.add("table-danger")):(e.classList.remove("table-warning"),e.classList.remove("table-dark"),e.classList.remove("table-danger"));r&&a.tooltip({toggle:"tooltip",placement:"bottom",title:r})}},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initTable()}},{key:"componentWillUnmount",value:function(){$(this.tableEl.current).find("tr[title]").tooltip("dispose")}},{key:"initTable",value:function(){var e=this,t=this.props.config||{},a=this.props.config.rowCallback;t.rowCallback=function(t,n){e.highlightRow(t,n),a&&a(t,n)},this.table=$(this.tableEl.current).DataTable(Object(n.a)({},this.defaultConfig,{},t))}},{key:"componentDidUpdate",value:function(e,t){p.a.isEqual(e.config,this.props.config)||(this.table.destroy(),this.initTable())}},{key:"render",value:function(){return d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("div",{className:"card data-tables"},d.a.createElement("div",{className:"card-header text-center"},d.a.createElement("h3",null,this.props.title)),d.a.createElement("div",{className:"card-body table-striped table-no-bordered table-hover dataTable dtr-inline table-full-width"},d.a.createElement("div",{className:"toolbar col-12"},d.a.createElement("div",{className:"row"},this.props.toolbar)),d.a.createElement("div",{className:"fresh-datatables"},d.a.createElement("table",{ref:this.tableEl,className:"table table-striped table-no-bordered table-hover",cellSpacing:"0",width:"100%",style:{width:"100%"}},d.a.createElement("thead",null,d.a.createElement("tr",null,this.props.children)),d.a.createElement("tfoot",null,d.a.createElement("tr",null,this.props.children))))))))}}]),t}(u.Component))},116:function(e,t,a){"use strict";function n(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}a.d(t,"a",(function(){return n}))},118:function(e,t,a){"use strict";var n=a(124),r=a.n(n);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.a.fire({title:"Are you sure?",text:t.consequence||"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:t.yes||"Yes"}).then((function(a){if(a.value){var n=r.a.fire({title:t.loading||"Waiting...",text:t.loading_text||"waiting for operation to complete",showConfirmButton:!1,onBeforeOpen:function(){r.a.showLoading()}});e().then((function(e){n.closeModal(),r.a.fire(e.success,e.succes_text,"success")}),(function(e){n.closeModal(),r.a.fire({icon:"error",title:"Oops...",text:e.error,footer:e.footer||""})}))}else a.dismiss===r.a.DismissReason.cancel&&r.a.fire("Cancelled",t.canceled,"error")}))}},120:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(7),r=a(3),s=a(4),l=a(11),c=a(10),i=a(12),o=a(0),u=a.n(o),d=(a(140),a(141),a(28)),m=a.n(d),p=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={date:""},a.dateInput=u.a.createRef(),a.hiddenInput=u.a.createRef(),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;m()(this.dateInput.current).datepicker({format:"dd/mm/yyyy",zIndexOffset:1040}).on("changeDate changeMonth changeYear",(function(t){return e.handleChange(t)})),this.dateInput.current.value=this.props.value?this.props.value.split("-").reverse().join("/"):""}},{key:"componentDidUpdate",value:function(e,t){if(e.value!==this.props.value){var a=this.props.value?this.props.value.split("-").reverse().join("/"):"";this.dateInput.current.value=a,new Date(this.props.value).getDate()&&m()(this.dateInput.current).datepicker("setDate",a)}}},{key:"handleChange",value:function(e){var t=e.target.value.split("/").reverse().join("-");Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(this.hiddenInput.current,t);var a=new Event("input",{bubbles:!0});this.hiddenInput.current.dispatchEvent(a)}},{key:"render",value:function(){var e=Object(n.a)({},this.props);return delete e.value,u.a.createElement(u.a.Fragment,null,u.a.createElement("input",Object.assign({onChange:this.handleChange.bind(this)},e,{type:"text",ref:this.dateInput})),u.a.createElement("input",{onChange:this.props.onChange,name:this.props.name,style:{display:"none"},ref:this.hiddenInput,value:this.state.date}))}}]),t}(o.Component)},122:function(e,t){jQuery.fn.dataTable.Api.register("MakeCellsEditable()",(function(e){var t=this.table();jQuery.fn.extend({updateEditableCell:function(t){var a=$(t).closest("table").DataTable().table(),n=a.row($(t).parents("tr")),r=a.cell($(t).parents("td, th")),s=r.index().column,l=function(e){var t;switch($(e).prop("nodeName").toLowerCase()){case"a":$(e).siblings("input").length>0&&(t=$(e).siblings("input")),$(e).siblings("select").length>0&&(t=$(e).siblings("select")),$(e).siblings("textarea").length>0&&(t=$(e).siblings("textarea"));break;default:t=$(e)}return t}(t),c=l.val();function i(){e.allowNulls.errorClass?$(l).addClass(e.allowNulls.errorClass):$(l).css({border:"red solid 1px"})}function o(t){var a=r.data();r.data(t),e.onUpdate(r,n,a)}!c&&e.allowNulls&&1!=e.allowNulls?e.allowNulls.columns?e.allowNulls.columns.indexOf(s)>-1?o(c):i():c||i():c&&e.onValidate?e.onValidate(r,n,c)?o(c):i():o(c);a.page.info().page},cancelEditableCell:function(e){var t=$(e.closest("table")).DataTable().table(),a=t.cell($(e).parents("td, th"));a.data(a.data()),t.draw()}}),"destroy"===e&&($(t.body()).off("click","td"),t=null),null!=t&&$(t.body()).on("click","td",(function(){var a=t.cell(this).index().column;if(e.columns&&e.columns.indexOf(a)>-1||!e.columns){var n=t.row($(this).parents("tr"));editableCellsRow=n;var r=t.cell(this).node(),s=t.cell(this).data();if(s=function(e){if("undefined"===typeof e||null===e||e.length<1)return"";isNaN(e)&&(e=e.replace(/'/g,"&#39;"));return e}(s),!$(r).find("input").length&&!$(r).find("select").length&&!$(r).find("textarea").length){var l=function(e,t,a){var n,r,s,l,c,i,o="",u="",d=!1;s={focus:!0,html:null},t.inputTypes&&$.each(t.inputTypes,(function(t,a){a.column==e&&(r=(n=a).type.toLowerCase())}));t.inputCss&&(l=t.inputCss);if(t.wrapperHtml){var m=t.wrapperHtml.split("{content}");2===m.length&&(o=m[0],u=m[1])}t.confirmationButton&&(t.confirmationButton.listenToKeys&&(d=t.confirmationButton.listenToKeys),c=t.confirmationButton.confirmCss,i=t.confirmationButton.cancelCss,r+="-confirm");switch(r){case"list":s.html=o+"<select class='"+l+"' onchange='$(this).updateEditableCell(this);'>",$.each(n.options,(function(e,t){a==t.value?s.html=s.html+"<option value='"+t.value+"' selected>"+t.display+"</option>":s.html=s.html+"<option value='"+t.value+"' >"+t.display+"</option>"})),s.html=s.html+"</select>"+u,s.focus=!1;break;case"list-confirm":s.html=o+"<select class='"+l+"'>",$.each(n.options,(function(e,t){a==t.value?s.html=s.html+"<option value='"+t.value+"' selected>"+t.display+"</option>":s.html=s.html+"<option value='"+t.value+"' >"+t.display+"</option>"})),s.html=s.html+"</select>&nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this);'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u,s.focus=!1;break;case"datepicker":case"datepicker-confirm":if("undefined"==typeof jQuery.ui){alert("jQuery UI is required for the DatePicker control but it is not loaded on the page!");break}jQuery(".datepick").datepicker("destroy"),s.html=o+"<input id='ejbeatycelledit' type='text' name='date' class='datepick "+l+"'   value='"+a+"'></input> &nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u,setTimeout((function(){var e="http://jqueryui.com/resources/demos/datepicker/images/calendar.gif";"undefined"!==typeof n.options&&"undefined"!==typeof n.options.icon&&(e=n.options.icon);jQuery(".datepick").datepicker({showOn:"button",buttonImage:e,buttonImageOnly:!0,buttonText:"Select date"})}),100);break;case"text-confirm":case"undefined-confirm":s.html=o+"<input id='ejbeatycelledit' class='"+l+"' value='"+a+"'"+(d?" onkeyup='if(event.keyCode==13) {$(this).updateEditableCell(this);} else if (event.keyCode===27) {$(this).cancelEditableCell(this);}'":"")+"></input>&nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u;break;case"textarea":case"textarea-confirm":s.html=o+"<textarea id='ejbeatycelledit' class='"+l+"'>"+a+"</textarea><a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u;break;case"number-confirm":s.html=o+"<input id='ejbeatycelledit' type='number' class='"+l+"' value='"+a+"'"+(d?" onkeyup='if(event.keyCode==13) {$(this).updateEditableCell(this);} else if (event.keyCode===27) {$(this).cancelEditableCell(this);}'":"")+"></input>&nbsp;<a href='javascript:void(0);' class='"+c+"' onclick='$(this).updateEditableCell(this)'>Confirm</a> <a href='javascript:void(0);' class='"+i+"' onclick='$(this).cancelEditableCell(this)'>Cancel</a>"+u;break;default:s.html=o+"<input id='ejbeatycelledit' class='"+l+"' onfocusout='$(this).updateEditableCell(this)' value='"+a+"' onkeyup='if(event.keyCode==13) {event.target.blur()}' ></input>"+u}return s}(a,e,s);$(r).html(l.html),l.focus&&$("#ejbeatycelledit").focus()}}}))}))},159:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n,r=a(1),s=a.n(r),l=a(6),c=a(7),i=a(3),o=a(4),u=a(11),d=a(10),m=a(12),p=a(0),h=a.n(p),f=a(36),b=a.n(f),v=a(38),g=a(29),E=a(120),y=a(118),k=Object(v.b)("teacherStore")(n=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).defaults={start:"",end:"",teacher_id:""},a.state={error:{},loading:!1,teachers:null,data:Object(c.a)({},a.defaults)},a.inputChanged=function(e,t){var n=t.target.value;a.setState((function(t){return t.data[e]=n}))},a.saveContinue=function(){a.submit().then((function(){a.setState({data:Object(c.a)({},a.defaults),error:{}})}))},a.save=function(){a.submit().then((function(){return a.props.close()}))},a.apply=function(){a.submit().then((function(){a.setState({error:{}})}))},a.submit=function(){var e=a.state.data;return a.setState({loading:!0}),a.props.submit(e).then((function(e){a.props.edit?Object(g.a)("Teacher Duty Successfully Edited","success","nc-check-2"):Object(g.a)("Teacher Duty Created Successfully","success","nc-check-2")}),(function(e){return a.setState({error:e}),Promise.reject(e)})).finally((function(e){return a.setState({loading:!1})}))},a.delete=function(){Object(y.a)((function(){return a.props.delete().then((function(e){return a.props.close(),{success:"Deleted!",succes_text:"Duty was deleted"}}),(function(e){throw{error:"Duty couldn't be deleted."}}))}),{loading_title:"Deleting...",loading_text:"Deleting Duty",canceled:"Deleting Duty Operation Cancelled",consequence:"Duty will be deleted"})},a.cancel=function(){var e=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.props.cancel());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();b.a.isEmpty(a.props.data)||!a.props.data.__meta_pending&&b.a.isEqual(a.props.data,a.state.data)?a.props.close():Object(y.a)((function(){return e().then((function(e){return a.props.close(),{success:"Cancelled!",succes_text:"Teacher on Duty entry was cancelled"}}),(function(e){throw{error:"Teacher on Duty entry couldn't be removed."}}))}),{loading_title:"Deleting...",loading_text:"Cancelling entry",canceled:"",consequence:"Entered information will be discarded"})},a.handleSubmit=function(e){e.preventDefault(),a.submitAction()},a.chooseAction=function(e){switch(e.target.name){case"apply":a.submitAction=a.apply;break;case"save":a.submitAction=a.save;break;case"save_continue":a.submitAction=a.saveContinue}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.teacherStore.list({},!0).then((function(t){e.setState({teachers:t})}))}},{key:"componentDidUpdate",value:function(e,t){b.a.isEqual(this.props.data,e.data)||this.setState({data:Object(c.a)({},this.state.data,{},this.props.data)}),b.a.isEqual(this.props.error,e.error)||this.setState({error:Object(c.a)({},this.state.error,{},this.props.error)})}},{key:"render",value:function(){var e=this.state.error||{},t="",a="",n="";return e.errors&&(t=e.errors.start?"is-invalid":"",a=e.errors.end?"is-invalid":"",n=e.errors.teacher_id?"is-invalid":""),h.a.createElement("div",{className:"container-fluid"},this.props.edit&&h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-12"},h.a.createElement("span",{className:"pull-right"},h.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.delete},"Delete")))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-12"},h.a.createElement("div",{className:"card stacked-form"},h.a.createElement("div",{className:"card-header "},h.a.createElement("h4",{className:"card-title"},"Teacher Details")),h.a.createElement("div",{className:"card-body "},h.a.createElement("form",{onSubmit:this.handleSubmit},e.message&&h.a.createElement("div",{className:"alert alert-danger"},h.a.createElement("span",null,h.a.createElement("b",null," Error - ")," ",e.message)),h.a.createElement("div",{className:"form-group"},h.a.createElement("label",null,"Starts on"),h.a.createElement(E.a,{value:this.state.data.start,onChange:this.inputChanged.bind(this,"start"),type:"text",placeholder:"Starts on",className:"form-control ".concat(t),required:!0}),t&&e.errors.start.map((function(e,t){return h.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},h.a.createElement("strong",null,e))})),h.a.createElement("p",{className:"help-block help-block-error"})),h.a.createElement("div",{className:"form-group"},h.a.createElement("label",null,"Ends on"),h.a.createElement(E.a,{value:this.state.data.end,onChange:this.inputChanged.bind(this,"end"),type:"text",placeholder:"End on",className:"form-control ".concat(a),required:!0}),a&&e.errors.end.map((function(e,t){return h.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},h.a.createElement("strong",null,e))})),h.a.createElement("p",{className:"help-block help-block-error"})),h.a.createElement("div",{className:"form-group"},h.a.createElement("label",null,"Teacher"),h.a.createElement("select",{value:this.state.data.teacher_id,onChange:this.inputChanged.bind(this,"teacher_id"),name:"gender",className:"form-control ".concat(n),required:!0},h.a.createElement("option",{value:""},"Select Teacher"),this.state.teachers&&this.state.teachers.map((function(e){return h.a.createElement("option",{key:e.id,value:e.id},e.firstname," ",e.lastname)}))),n&&e.errors.teacher.map((function(e,t){return h.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},h.a.createElement("strong",null,e))})),h.a.createElement("p",{className:"help-block help-block-error"})),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-sm-2"},h.a.createElement("input",{onClick:this.chooseAction,type:"submit",name:"save",value:"SAVE",disabled:this.state.loading,className:"btn btn-success"})),this.props.edit?h.a.createElement("div",{className:"col-sm-2"},h.a.createElement("input",{onClick:this.chooseAction,type:"submit",name:"apply",value:"APPLY",disabled:this.state.loading,className:"btn btn-primary"})):h.a.createElement("div",{className:"col-sm-3"},h.a.createElement("input",{onClick:this.chooseAction,type:"submit",name:"save_continue",value:"SAVE AND CONTINUE",disabled:this.state.loading,className:"btn btn-primary"})),h.a.createElement("div",{className:"col-sm-2"},h.a.createElement("input",{onClick:this.cancel,type:"button",value:"CANCEL",disabled:this.state.loading,className:"btn btn-warning"}))))),h.a.createElement("div",{className:"card-footer "})))))}}]),t}(p.Component))||n},263:function(e,t,a){"use strict";a.r(t);var n=a(37),r=a(3),s=a(4),l=a(11),c=a(10),i=a(12),o=a(0),u=a.n(o),d=a(17),m=a(19),p=a(2),h=a.n(p),f=a(39),b=a(7),v=a(36),g=a.n(v),E=a(29),y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).defaults={message:"",recipients:[""]},a.state={error:{},loading:!1,data:Object(b.a)({},a.defaults)},a.inputChanged=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){return e.data[t]=n}))},a.studentAdmChanged=function(e){var t=parseInt(e.target.name),n=e.target.value,r=a.state.data;r.recipients[t]=n,n?(e.target.onblur=function(){},r.recipients.length==t+1&&r.recipients.push("")):e.target.onblur=function(){var e=a.state.data;e.recipients.splice(t,1),a.setState({data:e})},a.setState({data:r})},a.save=function(){a.setState({loading:!0}),a.submit().then((function(){return a.props.close()}))},a.submit=function(){var e=a.state.data;return e.recipients.length>1&&e.recipients.splice(e.recipients.length-1),a.setState({loading:!0}),a.props.submit(e).then((function(e){Object(E.a)("Message Sent Successfully","success","nc-check-2")}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e.response.data)})).finally((function(e){return a.setState({loading:!1})}))},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.error||{},a="",n="";t.errors&&(a=t.message?"is-invalid":"",n=t.admission_no?"is-invalid":"");var r=this.state.data.recipients;return u.a.createElement("div",{className:"container-fluid",ref:this.elRef},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-12"},u.a.createElement("div",{className:"card stacked-form"},u.a.createElement("div",{className:"card-header "},u.a.createElement("h4",{className:"card-title"},"Message Details")),u.a.createElement("div",{className:"card-body "},u.a.createElement("form",{method:"#",action:"#"},t.message&&u.a.createElement("div",{className:"alert alert-danger"},u.a.createElement("span",null,u.a.createElement("b",null," Error - ")," ",t.message)),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",null,"Message"),u.a.createElement("textarea",{value:this.state.data.message,onChange:this.inputChanged,name:"message",type:"text",placeholder:"Enter message",className:"form-control ".concat(a)}),a&&t.errors.message.map((function(e,t){return u.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},u.a.createElement("strong",null,e))}))),u.a.createElement("div",{className:"form-group row"},u.a.createElement("label",{className:"col-sm-2 col-form-label"},"Student Admissions:"),u.a.createElement("div",{className:"col-10"},r.map((function(t,a){return u.a.createElement("input",{key:a,value:e.state.data.recipients[a],onChange:e.studentAdmChanged,name:a,type:"text",placeholder:"Admission Number",className:"form-control ".concat(n)})})))))),u.a.createElement("div",{className:"card-footer "},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("input",{onClick:this.save,type:"button",value:"SEND",disabled:this.state.loading,className:"btn btn-success"})),u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("input",{onClick:this.props.close,type:"button",value:"CLOSE",disabled:this.state.loading,className:"btn btn-warning"}))))))))}}]),t}(o.Component),k=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).defaults={message:"",class_id:"",stream_id:""},a.state={error:{},loading:!1,classes:null,data:Object(b.a)({},a.defaults)},a.inputChanged=function(e){var t=e.target.name,n=a.state.data;n[t]=e.target.value,"class_id"==t&&(n.stream_id=""),a.setState({data:n})},a.save=function(){a.submit().then((function(){return a.props.close()}))},a.submit=function(){var e=a.state.data;return a.setState({loading:!0}),a.props.submit(e).then((function(e){Object(E.a)("Message Sent Successfully","success","nc-check-2")}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e.response.data)})).finally((function(e){return a.setState({loading:!1})}))},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;axios.get("/api/setup/classes").then((function(t){e.setState({classes:t.data.data})}))}},{key:"componentDidUpdate",value:function(e,t){this.props.edit&&(g.a.isEqual(this.props.data,e.data)||this.setState({data:Object(b.a)({},this.state.data,{},this.props.data)})),g.a.isEqual(this.props.error,e.error)||this.setState({error:Object(b.a)({},this.state.error,{},this.props.error)})}},{key:"render",value:function(){var e=this,t=this.state.error||{},a="",n="",r="";t.errors&&(a=t.message?"is-invalid":"",n=t.class_id?"is-invalid":"",r=t.stream_id?"is-invalid":"");var s=this.state.classes,l=null;if(s){var c=s.find((function(t){return t.id==e.state.data.class_id}));c&&(l=c.streams)}return u.a.createElement("div",{className:"container-fluid",ref:this.elRef},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-12"},u.a.createElement("div",{className:"card stacked-form"},u.a.createElement("div",{className:"card-header "},u.a.createElement("h4",{className:"card-title"},"Message Details")),u.a.createElement("div",{className:"card-body "},u.a.createElement("form",{method:"#",action:"#"},t.message&&u.a.createElement("div",{className:"alert alert-danger"},u.a.createElement("span",null,u.a.createElement("b",null," Error - ")," ",t.message)),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",null,"Message"),u.a.createElement("textarea",{value:this.state.data.message,onChange:this.inputChanged,name:"message",placeholder:"Enter message",className:"form-control ".concat(a)}),a&&t.errors.message.map((function(e,t){return u.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},u.a.createElement("strong",null,e))}))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"form-group col-sm-6"},u.a.createElement("label",null,"Class"),u.a.createElement("select",{value:this.state.data.class_id,onChange:this.inputChanged,name:"class_id",className:"form-control ".concat(n),size:"8"},u.a.createElement("option",{value:""},"All Classes"),s&&s.map((function(e){return u.a.createElement("option",{key:e.id,value:e.id},e.name)}))),n&&t.errors.class_id.map((function(e,t){return u.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},u.a.createElement("strong",null,e))})),u.a.createElement("p",{className:"help-block help-block-error"})),u.a.createElement("div",{className:"form-group col-sm-6"},u.a.createElement("label",null,"Stream"),u.a.createElement("select",{disabled:!this.state.data.class_id,value:this.state.data.stream_id,onChange:this.inputChanged,name:"stream_id",className:"form-control ".concat(r),size:"8"},u.a.createElement("option",{value:""},"All Streams"),l&&l.map((function(e){return u.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r&&t.errors.stream_id.map((function(e,t){return u.a.createElement("span",{key:t,className:"invalid-feedback",role:"alert"},u.a.createElement("strong",null,e))})),u.a.createElement("p",{className:"help-block help-block-error"}))))),u.a.createElement("div",{className:"card-footer "},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("input",{onClick:this.save,type:"button",value:"SEND",disabled:this.state.loading,className:"btn btn-success"})),u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("input",{onClick:this.props.close,type:"button",value:"CLOSE",disabled:this.state.loading,className:"btn btn-warning"}))))))))}}]),t}(o.Component),N=(a(159),a(115));a(116);a.d(t,"default",(function(){return C})),a.d(t,"Messages",(function(){return j})),a.d(t,"MessageQuick",(function(){return O})),a.d(t,"MessageBulk",(function(){return w}));var C=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.match;return u.a.createElement(f.a,null,u.a.createElement(d.b,{path:"".concat(e.path,"/quick"),render:function(e){return u.a.createElement(O,e)}}),u.a.createElement(d.b,{path:"".concat(e.path,"/bulk"),render:function(e){return u.a.createElement(w,e)}}),u.a.createElement(d.b,{exact:!0,path:"".concat(e.path),render:function(e){return u.a.createElement(j,e)}}))}}]),t}(o.Component),j=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(l.a)(this,Object(c.a)(t).call(this,e));var s=Object(n.a)(a);return window.todListActionEdit=a.edit,a.state={},a.dataTable=u.a.createRef(),a.dataTableConfig={order:[[0,"desc"]],serverSide:!0,processing:!0,ajax:function(e,t,a){h.a.get("/api/messages",{params:{params:e}}).then((function(e){t(e.data)}))},columns:[{data:"created_at",name:"created_at",class:"text-center",render:function(e,t,a){return new Date(e).toDateString()}},{data:"message",name:"message",class:"text-center"},{data:null,class:"text-center",render:function(e,t,a){if(e.recipients){var n="<ul>";return JSON.parse(e.recipients.replace(/\&quot;/g,'"')).forEach((function(e){return n+="<li>".concat(e,"</li>")})),n+="</ul>"}var r="";if(e.class_id){var l=s.state.classes?s.state.classes.find((function(t){return t.id==e.class_id})):null;r=l?l.name:e.class_id,r+=e.stream_id?" ".concat(l?l.streams.find((function(t){return t.id==e.stream_id})).name:e.stream_id):" All Streams"}else r="All Classes";return r}}]},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.get("/api/setup/classes").then((function(t){e.setState({classes:t.data.data},(function(){return e.dataTable.current.draw()}))}))}},{key:"render",value:function(){var e=this.props.match;return u.a.createElement("div",{className:"container-fluid"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-12"},u.a.createElement("span",{className:"pull-right"},u.a.createElement(m.b,{to:"".concat(e.url,"/bulk"),className:"btn btn-success details"},u.a.createElement("i",{className:"fa fa-comments"})," Bulk SMS"),"\xa0",u.a.createElement(m.b,{to:"".concat(e.url,"/quick"),className:"btn btn-info details"},u.a.createElement("i",{className:"fa fa-comment"})," Quick SMS")))),u.a.createElement(N.a,{ref:this.dataTable,title:"Sent Messages",config:this.dataTableConfig},u.a.createElement("th",null,"Date"),u.a.createElement("th",null,"Message"),u.a.createElement("th",null,"recipients")))}}]),t}(o.Component),O=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={error:{}},a.submit=function(e){return h.a.post("/api/messages",e).then((function(e){return a.setState({error:{}}),e}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/messages")},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(y,{error:this.state.error,submit:this.submit,close:this.close})}}]),t}(o.Component),w=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={error:{}},a.submit=function(e){return h.a.post("/api/messages",e).then((function(e){return a.setState({error:{}}),e}),(function(e){return a.setState({error:e.response.data}),Promise.reject(e)}))},a.close=function(){a.props.history.push("/school/messages")},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(k,{error:this.state.error,submit:this.submit,close:this.close})}}]),t}(o.Component)}}]);
//# sourceMappingURL=11.09881c63.chunk.js.map